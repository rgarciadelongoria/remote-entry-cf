import{a as l}from"./chunk-G3RWDVWQ.js";import{a as S,b as v}from"./chunk-FVBUAS3B.js";import{b as C,d as p}from"./chunk-DUEWQYKU.js";import{c as g}from"./chunk-POLL2CVR.js";import{bootstrapApplication as J}from"@angular/platform-browser";import{APP_INITIALIZER as U}from"@angular/core";import{provideRouter as W}from"@angular/router";var m=function(n){return n.Home="",n.Sign="sign",n.Account="account",n.Payment="payment",n}(m||{});import{inject as E}from"@angular/core";import{Router as M,RouterOutlet as L}from"@angular/router";import{CommonModule as b}from"@angular/common";import{computed as F,inject as j}from"@angular/core";import{RouterModule as k}from"@angular/router";import*as t from"@angular/core";import*as _ from"@angular/router";function H(n,i){if(n&1){let c=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",4)(1,"div",6)(2,"a",7),t.\u0275\u0275text(3,"Account"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(4,"div",4)(5,"div",6)(6,"a",8),t.\u0275\u0275text(7,"Payment"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(8,"div",4)(9,"div",9),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(c);let r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onSignOut())}),t.\u0275\u0275elementStart(10,"a"),t.\u0275\u0275text(11,"Sign out"),t.\u0275\u0275elementEnd()()()}}function O(n,i){n&1&&(t.\u0275\u0275elementStart(0,"div",4)(1,"div",6)(2,"a",10),t.\u0275\u0275text(3,"Sign in"),t.\u0275\u0275elementEnd()()())}var y=(()=>{let i=class i extends p{constructor(){super(...arguments),this.authSrv=j(l),this.isLoggedIn=F(()=>!!this.state.user())}onSignOut(){this.authSrv.logOut()}};i.\u0275fac=(()=>{let o;return function(s){return(o||(o=t.\u0275\u0275getInheritedFactory(i)))(s||i)}})(),i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-header"]],inputs:{isShell:"isShell"},standalone:!0,features:[t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275StandaloneFeature],decls:12,vars:2,consts:[[1,"header"],[1,"container"],[1,"row","align-items-center","justify-content-between"],["routerLink","/",1,"col-auto"],[1,"col-auto"],[1,"row","align-items-center"],[1,"nav-item"],["routerLink","/account"],["routerLink","/payment"],[1,"nav-item",3,"click"],["routerLink","/sign"]],template:function(r,s){r&1&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"b"),t.\u0275\u0275text(5,"CF "),t.\u0275\u0275elementStart(6,"small"),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(8,"div",4)(9,"div",5),t.\u0275\u0275template(10,H,12,0)(11,O,4,0),t.\u0275\u0275elementEnd()()()()()),r&2&&(t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(s.isShell?"shell":"web"),t.\u0275\u0275advance(3),t.\u0275\u0275conditional(10,s.isLoggedIn()?10:11))},dependencies:[b,k,_.RouterLink],styles:[".header[_ngcontent-%COMP%]{padding:1rem 0;border-bottom:1px solid #dedede}"]});let n=i;return n})();import{DOCUMENT as P}from"@angular/common";import{RendererFactory2 as T}from"@angular/core";import*as a from"@angular/core";var x=(()=>{let i=class i{constructor(o,r){this._document=o,this.injector=r}get document(){return this._document}get renderer(){return this._renderer||(this._renderer=this.crearRenderer()),this._renderer}init(){this.setElemToHead("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css",integrity:"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH",crossorigin:"anonymous"})}setElemToHead(o,r){let s=this.renderer.createElement(o);Object.entries(r).forEach(([d,u])=>this.renderer.setAttribute(s,d,u)),this.renderer.appendChild(this.document.head,s)}getRendererFactory(){return this._rendererFactory2||(this._rendererFactory2=this.injector.get(T)),this._rendererFactory2}crearRenderer(){return this.getRendererFactory().createRenderer(null,null)}};i.\u0275fac=function(r){return new(r||i)(a.\u0275\u0275inject(P),a.\u0275\u0275inject(a.Injector))},i.\u0275prov=a.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();import*as e from"@angular/core";function V(n,i){if(n&1){let c=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"img",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(c);let r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.showHint=!1)}),e.\u0275\u0275elementEnd()}}function D(n,i){if(n&1){let c=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",4),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(c);let r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.showHint=!0)}),e.\u0275\u0275text(1,"Show hint"),e.\u0275\u0275elementEnd()}}var h=(()=>{let i=class i extends p{constructor(){super(...arguments),this.image="",this.router=E(M),this.domSrv=E(x),this.showHint=!1}handleShellScannerResponse(o){return g(this,null,function*(){this.image=o.detail?.response||""})}get isShell(){return this.state.isShell}ngOnInit(){let o=this.router.config?.[0]?.data?.isShell??!1;this.domSrv.init(),this.updateState("isShell",o)}openCamera(){alert("Abrir c\xE1mara"),window.dispatchEvent(new CustomEvent("OPEN_CAMERA"))}};i.\u0275fac=(()=>{let o;return function(s){return(o||(o=e.\u0275\u0275getInheritedFactory(i)))(s||i)}})(),i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-root"]],hostBindings:function(r,s){r&1&&e.\u0275\u0275listener("RESPONSE_CAMERA",function(u){return s.handleShellScannerResponse(u)},!1,e.\u0275\u0275resolveWindow)},standalone:!0,features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275StandaloneFeature],decls:9,vars:3,consts:[[3,"isShell"],[1,"body"],[1,"img-container"],["src","assets/cf/milhouse.gif"],[3,"click"],[3,"src"],["src","assets/cf/milhouse.gif",3,"click"]],template:function(r,s){r&1&&(e.\u0275\u0275element(0,"app-header",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"router-outlet"),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275template(4,V,1,0,"img",3)(5,D,2,0),e.\u0275\u0275elementStart(6,"button",4),e.\u0275\u0275listener("click",function(){return s.openCamera()}),e.\u0275\u0275text(7,"open camera"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"img",5),e.\u0275\u0275elementEnd()()),r&2&&(e.\u0275\u0275property("isShell",s.isShell()),e.\u0275\u0275advance(4),e.\u0275\u0275conditional(4,s.showHint?4:5),e.\u0275\u0275advance(4),e.\u0275\u0275property("src",s.image,e.\u0275\u0275sanitizeUrl))},dependencies:[L,y],styles:[".img-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}"]});let n=i;return n})();var A=[{path:m.Home,loadComponent:()=>import("./chunk-CPQXJW3G.js").then(n=>n.HomePageComponent)},{path:m.Sign,loadComponent:()=>import("./chunk-BRDDKNCF.js").then(n=>n.SignPageComponent)},{path:m.Account,loadComponent:()=>import("./chunk-C2IVEHME.js").then(n=>n.AccountPageComponent)},{path:m.Payment,loadComponent:()=>import("./chunk-TIPGOC7W.js").then(n=>n.PaymentPageComponent)}];import{provideClientHydration as K}from"@angular/platform-browser";import{provideHttpClient as Y,withFetch as z}from"@angular/common/http";import{inject as f}from"@angular/core";import{of as B,tap as N}from"rxjs";import*as w from"@angular/core";var I=(()=>{let i=class i{constructor(){this.storageSrv=f(v),this.authSrv=f(l),this.stateSrv=f(C)}init(){return(this.storageSrv.getCookie(S.TOKEN)?this.authSrv.init():B(!0)).pipe(N(()=>this.stateSrv.update("isReady",!0)))}};i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=w.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();function Z(n){return()=>n.init()}var R={providers:[W(A),K(),Y(z()),{provide:U,useFactory:Z,deps:[I],multi:!0}]};J(h,R).catch(n=>console.error(n));
