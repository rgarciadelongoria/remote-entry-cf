import{a as p}from"./chunk-JOP3RYGR.js";import{d as a}from"./chunk-OFH4QNJH.js";import{c as d}from"./chunk-POLL2CVR.js";import{inject as _}from"@angular/core";import{Router as R,RouterOutlet as F}from"@angular/router";import{CommonModule as g}from"@angular/common";import{computed as C,inject as S}from"@angular/core";import{RouterModule as v}from"@angular/router";import*as t from"@angular/core";import*as u from"@angular/router";function y(n,c){if(n&1){let i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",4)(1,"div",6)(2,"a",7),t.\u0275\u0275text(3,"Account"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(4,"div",4)(5,"div",6)(6,"a",8),t.\u0275\u0275text(7,"Payment"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(8,"div",4)(9,"div",9),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);let r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onSignOut())}),t.\u0275\u0275elementStart(10,"a"),t.\u0275\u0275text(11,"Sign out"),t.\u0275\u0275elementEnd()()()}}function E(n,c){n&1&&(t.\u0275\u0275elementStart(0,"div",4)(1,"div",6)(2,"a",10),t.\u0275\u0275text(3,"Sign in"),t.\u0275\u0275elementEnd()()())}var h=(()=>{class n extends a{constructor(){super(...arguments),this.authSrv=S(p),this.isLoggedIn=C(()=>!!this.state.user())}onSignOut(){this.authSrv.logOut()}static{this.\u0275fac=(()=>{let i;return function(r){return(i||(i=t.\u0275\u0275getInheritedFactory(n)))(r||n)}})()}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-header"]],inputs:{isShell:"isShell"},standalone:!0,features:[t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275StandaloneFeature],decls:12,vars:2,consts:[[1,"header"],[1,"container"],[1,"row","align-items-center","justify-content-between"],["routerLink","/",1,"col-auto"],[1,"col-auto"],[1,"row","align-items-center"],[1,"nav-item"],["routerLink","/account"],["routerLink","/payment"],[1,"nav-item",3,"click"],["routerLink","/sign"]],template:function(o,r){o&1&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"b"),t.\u0275\u0275text(5,"CF "),t.\u0275\u0275elementStart(6,"small"),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(8,"div",4)(9,"div",5),t.\u0275\u0275template(10,y,12,0)(11,E,4,0),t.\u0275\u0275elementEnd()()()()()),o&2&&(t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(r.isShell?"shell":"web"),t.\u0275\u0275advance(3),t.\u0275\u0275conditional(10,r.isLoggedIn()?10:11))},dependencies:[g,v,u.RouterLink],styles:[".header[_ngcontent-%COMP%]{padding:1rem 0;border-bottom:1px solid #dedede}"]})}}return n})();import{DOCUMENT as x}from"@angular/common";import{RendererFactory2 as w}from"@angular/core";import*as s from"@angular/core";var f=(()=>{class n{constructor(i,o){this._document=i,this.injector=o}get document(){return this._document}get renderer(){return this._renderer||(this._renderer=this.crearRenderer()),this._renderer}init(){this.setElemToHead("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css",integrity:"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH",crossorigin:"anonymous"})}setElemToHead(i,o){let r=this.renderer.createElement(i);Object.entries(o).forEach(([m,l])=>this.renderer.setAttribute(r,m,l)),this.renderer.appendChild(this.document.head,r)}getRendererFactory(){return this._rendererFactory2||(this._rendererFactory2=this.injector.get(w)),this._rendererFactory2}crearRenderer(){return this.getRendererFactory().createRenderer(null,null)}static{this.\u0275fac=function(o){return new(o||n)(s.\u0275\u0275inject(x),s.\u0275\u0275inject(s.Injector))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();import*as e from"@angular/core";function j(n,c){if(n&1){let i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"img",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(i);let r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.showHint=!1)}),e.\u0275\u0275elementEnd()}}function k(n,c){if(n&1){let i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(i);let r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.showHint=!0)}),e.\u0275\u0275text(1,"Show hint"),e.\u0275\u0275elementEnd()}}var X=(()=>{class n extends a{constructor(){super(...arguments),this.image="",this.router=_(R),this.domSrv=_(f),this.showHint=!1}handleShellScannerResponse(i){return d(this,null,function*(){this.image=i.detail?.response||""})}get isShell(){return this.state.isShell}ngOnInit(){let i=this.router.config?.[0]?.data?.isShell??!1;this.domSrv.init(),this.updateState("isShell",i)}openCamera(){window.dispatchEvent(new CustomEvent("OPEN_CAMERA"))}static{this.\u0275fac=(()=>{let i;return function(r){return(i||(i=e.\u0275\u0275getInheritedFactory(n)))(r||n)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-root"]],hostBindings:function(o,r){o&1&&e.\u0275\u0275listener("RESPONSE_CAMERA}",function(l){return r.handleShellScannerResponse(l)},!1,e.\u0275\u0275resolveWindow)},standalone:!0,features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275StandaloneFeature],decls:9,vars:3,consts:[[3,"isShell"],[1,"body"],[1,"img-container"],["src","assets/cf/milhouse.gif"],["(click","openCamera()",")",""],[3,"src"],["src","assets/cf/milhouse.gif",3,"click"],[3,"click"]],template:function(o,r){o&1&&(e.\u0275\u0275element(0,"app-header",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"router-outlet"),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275template(4,j,1,0,"img",3)(5,k,2,0),e.\u0275\u0275elementStart(6,"p",4),e.\u0275\u0275text(7,"open camera"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"img",5),e.\u0275\u0275elementEnd()()),o&2&&(e.\u0275\u0275property("isShell",r.isShell()),e.\u0275\u0275advance(4),e.\u0275\u0275conditional(4,r.showHint?4:5),e.\u0275\u0275advance(4),e.\u0275\u0275property("src",r.image,e.\u0275\u0275sanitizeUrl))},dependencies:[F,h],styles:[".img-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}"]})}}return n})();export{X as a};
